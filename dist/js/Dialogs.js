var OpenDialog=function(){var e=document.createElement("iframe"),t=(e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0",mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)?20:0);e.setAttribute("width",(Editor.useLocalStorage?640:320)+t+"px"),e.setAttribute("height",(Editor.useLocalStorage?480:220)+t+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(t,e,l,i){this.editorUi=t;var c=document.createElement("input"),n=(c.style.marginBottom="10px",c.style.width="216px",mxClient.IS_IE&&(c.style.marginTop="10px",document.body.appendChild(c)),null!=l?l:this.createApplyFunction());function u(){var e=c.value;/(^#?[a-zA-Z0-9]*$)/.test(e)?("none"!=e&&"#"!=e.charAt(0)&&(e="#"+e),ColorDialog.addRecentColor("none"!=e?e.substring(1):e,12),n(e),t.hideDialog()):t.handleError({message:mxResources.get("invalidInput")})}this.init=function(){mxClient.IS_TOUCH||c.focus()};var p=new mxJSColor.color(c),l=(p.pickerOnfocus=!1,p.showPicker(),document.createElement("div")),m=(mxJSColor.picker.box.style.position="relative",mxJSColor.picker.box.style.width="230px",mxJSColor.picker.box.style.height="100px",mxJSColor.picker.box.style.paddingBottom="10px",l.appendChild(mxJSColor.picker.box),document.createElement("center"));function g(){var e=o(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}function o(e,t,l,i){t=null!=t?t:12;for(var n=document.createElement("table"),o=(n.style.borderCollapse="collapse",n.setAttribute("cellspacing","0"),n.style.marginBottom="20px",n.style.cellSpacing="0px",document.createElement("tbody")),a=(n.appendChild(o),e.length/t),r=0;r<a;r++){for(var d=document.createElement("tr"),s=0;s<t;s++)!function(e){var t=document.createElement("td");t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px","none"==(e=null==e?l:e)?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e,d.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",function(){"none"==e?(p.fromString("ffffff"),c.value="none"):p.fromString(e)}),mxEvent.addListener(t,"dblclick",u))}(e[r*t+s]);o.appendChild(d)}return i&&((i=document.createElement("td")).setAttribute("title",mxResources.get("reset")),i.style.border="1px solid black",i.style.padding="0px",i.style.width="16px",i.style.height="16px",i.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",i.style.backgroundPosition="center center",i.style.backgroundRepeat="no-repeat",i.style.cursor="pointer",d.appendChild(i),mxEvent.addListener(i,"click",function(){ColorDialog.resetRecentColors(),n.parentNode.replaceChild(g(),n)})),m.appendChild(n),n}l.appendChild(c),mxUtils.br(l),g();var a=o(this.presetColors),a=(a.style.marginBottom="8px",(a=o(this.defaultColors)).style.marginBottom="16px",l.appendChild(m),document.createElement("div")),r=(a.style.textAlign="right",a.style.whiteSpace="nowrap",mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=i&&i()})),d=(r.className="geBtn",t.editor.cancelFirst&&a.appendChild(r),mxUtils.button(mxResources.get("apply"),u));d.className="geBtn gePrimaryBtn",a.appendChild(d),t.editor.cancelFirst||a.appendChild(r),null!=e&&("none"==e?(p.fromString("ffffff"),c.value="none"):p.fromString(e)),l.appendChild(a),this.picker=p,this.colorInput=c,mxEvent.addListener(l,"keydown",function(e){27==e.keyCode&&(t.hideDialog(),null!=i&&i(),mxEvent.consume(e))}),this.container=l},AboutDialog=(ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]},function(e){var t=document.createElement("div"),l=(t.setAttribute("align","center"),document.createElement("h3")),l=(mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l),document.createElement("img")),l=(l.style.border="0px",l.setAttribute("width","176"),l.setAttribute("width","151"),l.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(l),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t),document.createElement("a")),l=(l.setAttribute("href","http://www.jgraph.com/"),l.setAttribute("target","_blank"),mxUtils.write(l,"www.jgraph.com"),t.appendChild(l),mxUtils.br(t),mxUtils.br(t),mxUtils.button(mxResources.get("close"),function(){e.hideDialog()}));l.className="geBtn gePrimaryBtn",t.appendChild(l),this.container=t}),TextareaDialog=function(e,t,l,i,n,o,a,r,d,s,c,u,p,m){a=null!=a?a:300,r=null!=r?r:120,s=null!=s&&s;var g=document.createElement("table"),h=document.createElement("tbody"),x=document.createElement("tr"),C=document.createElement("td"),b=(C.style.fontSize="10pt",C.style.width="100px",mxUtils.write(C,t),x.appendChild(C),h.appendChild(x),x=document.createElement("tr"),C=document.createElement("td"),document.createElement("textarea"));if(c&&b.setAttribute("wrap","off"),b.setAttribute("spellcheck","false"),b.setAttribute("autocorrect","off"),b.setAttribute("autocomplete","off"),b.setAttribute("autocapitalize","off"),mxUtils.write(b,l||""),b.style.resize="none",b.style.width=a+"px",b.style.height=r+"px",this.textarea=b,this.init=function(){b.focus(),b.scrollTop=0},C.appendChild(b),x.appendChild(C),h.appendChild(x),x=document.createElement("tr"),(C=document.createElement("td")).style.paddingTop="14px",C.style.whiteSpace="nowrap",C.setAttribute("align","right"),null!=p&&((t=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(p)})).className="geBtn",C.appendChild(t)),null!=m)for(var y=0;y<m.length;y++)!function(e,t){e=mxUtils.button(e,function(e){t(e,b)});e.className="geBtn",C.appendChild(e)}(m[y][0],m[y][1]);c=mxUtils.button(o||mxResources.get("cancel"),function(){e.hideDialog(),null!=n&&n()});c.className="geBtn",e.editor.cancelFirst&&C.appendChild(c),null!=d&&d(C,b),null!=i&&((l=mxUtils.button(u||mxResources.get("apply"),function(){s||e.hideDialog(),i(b.value)})).className="geBtn gePrimaryBtn",C.appendChild(l)),e.editor.cancelFirst||C.appendChild(c),x.appendChild(C),h.appendChild(x),g.appendChild(h),this.container=g},EditDiagramDialog=function(o){var e=document.createElement("div"),a=(e.style.textAlign="right",document.createElement("textarea"));a.setAttribute("wrap","off"),a.setAttribute("spellcheck","false"),a.setAttribute("autocorrect","off"),a.setAttribute("autocomplete","off"),a.setAttribute("autocapitalize","off"),a.style.overflow="auto",a.style.resize="none",a.style.width="600px",a.style.height="360px",a.style.marginBottom="16px",a.value=mxUtils.getPrettyXml(o.editor.getGraphXml()),e.appendChild(a),this.init=function(){a.focus()},Graph.fileSupport&&(a.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),a.addEventListener("drop",function(e){var t,l;e.stopPropagation(),e.preventDefault(),0<e.dataTransfer.files.length?(t=e.dataTransfer.files[0],(l=new FileReader).onload=function(e){a.value=e.target.result},l.readAsText(t)):a.value=o.extractGraphModelFromEvent(e)},!1));var t=mxUtils.button(mxResources.get("cancel"),function(){o.hideDialog()}),r=(t.className="geBtn",o.editor.cancelFirst&&e.appendChild(t),document.createElement("select")),l=(r.style.width="180px",r.className="geBtn",o.editor.graph.isEnabled()&&((l=document.createElement("option")).setAttribute("value","replace"),mxUtils.write(l,mxResources.get("replaceExistingDrawing")),r.appendChild(l)),document.createElement("option")),l=(l.setAttribute("value","new"),mxUtils.write(l,mxResources.get("openInNewWindow")),EditDiagramDialog.showNewWindowOption&&r.appendChild(l),o.editor.graph.isEnabled()&&((l=document.createElement("option")).setAttribute("value","import"),mxUtils.write(l,mxResources.get("addToExistingDrawing")),r.appendChild(l)),e.appendChild(r),mxUtils.button(mxResources.get("ok"),function(){var e=Graph.zapGremlins(mxUtils.trim(a.value)),t=null;if("new"==r.value)o.hideDialog(),o.editor.editAsNew(e);else if("replace"==r.value){o.editor.graph.model.beginUpdate();try{o.editor.setGraphXml(mxUtils.parseXml(e).documentElement),o.hideDialog()}catch(e){t=e}finally{o.editor.graph.model.endUpdate()}}else if("import"==r.value){o.editor.graph.model.beginUpdate();try{var l=mxUtils.parseXml(e),i=new mxGraphModel,n=(new mxCodec(l).decode(l.documentElement,i),i.getChildren(i.getChildAt(i.getRoot(),0)));o.editor.graph.setSelectionCells(o.editor.graph.importCells(n)),o.hideDialog()}catch(e){t=e}finally{o.editor.graph.model.endUpdate()}}null!=t&&mxUtils.alert(t.message)}));l.className="geBtn gePrimaryBtn",e.appendChild(l),o.editor.cancelFirst||e.appendChild(t),this.container=e},ExportDialog=(EditDiagramDialog.showNewWindowOption=!0,function(a){var e,t,r=a.editor.graph,l=r.getGraphBounds(),i=r.view.scale,n=Math.ceil(l.width/i),o=Math.ceil(l.height/i),l=document.createElement("table"),i=document.createElement("tbody"),d=(l.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",t.style.width="100px",mxUtils.write(t,mxResources.get("filename")+":"),e.appendChild(t),document.createElement("input")),s=(d.setAttribute("value",a.editor.getOrCreateFilename()),d.style.width="180px",(t=document.createElement("td")).appendChild(d),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("format")+":"),e.appendChild(t),document.createElement("select")),c=(s.style.width="180px",document.createElement("option")),c=(c.setAttribute("value","png"),mxUtils.write(c,mxResources.get("formatPng")),s.appendChild(c),document.createElement("option")),c=(ExportDialog.showGifOption&&(c.setAttribute("value","gif"),mxUtils.write(c,mxResources.get("formatGif")),s.appendChild(c)),document.createElement("option")),c=(c.setAttribute("value","jpg"),mxUtils.write(c,mxResources.get("formatJpg")),s.appendChild(c),document.createElement("option")),c=(c.setAttribute("value","pdf"),mxUtils.write(c,mxResources.get("formatPdf")),s.appendChild(c),document.createElement("option")),u=(c.setAttribute("value","svg"),mxUtils.write(c,mxResources.get("formatSvg")),s.appendChild(c),ExportDialog.showXmlOption&&((c=document.createElement("option")).setAttribute("value","xml"),mxUtils.write(c,mxResources.get("formatXml")),s.appendChild(c)),(t=document.createElement("td")).appendChild(s),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("zoom")+" (%):"),e.appendChild(t),document.createElement("input")),p=(u.setAttribute("type","number"),u.setAttribute("value","100"),u.style.width="180px",(t=document.createElement("td")).appendChild(u),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("width")+":"),e.appendChild(t),document.createElement("input")),m=(p.setAttribute("value",n),p.style.width="180px",(t=document.createElement("td")).appendChild(p),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("height")+":"),e.appendChild(t),document.createElement("input")),g=(m.setAttribute("value",o),m.style.width="180px",(t=document.createElement("td")).appendChild(m),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("dpi")+":"),e.appendChild(t),document.createElement("select")),c=(g.style.width="180px",document.createElement("option")),c=(c.setAttribute("value","100"),mxUtils.write(c,"100dpi"),g.appendChild(c),document.createElement("option")),c=(c.setAttribute("value","200"),mxUtils.write(c,"200dpi"),g.appendChild(c),document.createElement("option")),c=(c.setAttribute("value","300"),mxUtils.write(c,"300dpi"),g.appendChild(c),document.createElement("option")),c=(c.setAttribute("value","400"),mxUtils.write(c,"400dpi"),g.appendChild(c),document.createElement("option")),h=(c.setAttribute("value","custom"),mxUtils.write(c,mxResources.get("custom")),g.appendChild(c),document.createElement("input")),x=(h.style.width="180px",h.style.display="none",h.setAttribute("value","100"),h.setAttribute("type","number"),h.setAttribute("min","50"),h.setAttribute("step","50"),!1),C=(mxEvent.addListener(g,"change",function(){"custom"==this.value?(this.style.display="none",h.style.display="",h.focus()):(h.value=this.value,x||(u.value=this.value))}),mxEvent.addListener(h,"change",function(){var e=parseInt(h.value);isNaN(e)||e<=0?h.style.backgroundColor="red":(h.style.backgroundColor="",x||(u.value=e))}),(t=document.createElement("td")).appendChild(g),t.appendChild(h),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("background")+":"),e.appendChild(t),document.createElement("input")),b=(C.setAttribute("type","checkbox"),C.checked=null==r.background||r.background==mxConstants.NONE,(t=document.createElement("td")).appendChild(C),mxUtils.write(t,mxResources.get("transparent")),e.appendChild(t),i.appendChild(e),e=document.createElement("tr"),(t=document.createElement("td")).style.fontSize="10pt",mxUtils.write(t,mxResources.get("borderWidth")+":"),e.appendChild(t),document.createElement("input"));function y(){var e=d.value,t=e.lastIndexOf(".");d.value=0<t?e.substring(0,t+1)+s.value:e+"."+s.value,"xml"===s.value?(u.setAttribute("disabled","true"),p.setAttribute("disabled","true"),m.setAttribute("disabled","true"),b.setAttribute("disabled","true")):(u.removeAttribute("disabled"),p.removeAttribute("disabled"),m.removeAttribute("disabled"),b.removeAttribute("disabled")),"png"===s.value||"svg"===s.value||"pdf"===s.value?C.removeAttribute("disabled"):C.setAttribute("disabled","disabled"),"png"===s.value?(g.removeAttribute("disabled"),h.removeAttribute("disabled")):(g.setAttribute("disabled","disabled"),h.setAttribute("disabled","disabled"))}function v(){p.value*m.value>MAX_AREA||p.value<=0?p.style.backgroundColor="red":p.style.backgroundColor="",p.value*m.value>MAX_AREA||m.value<=0?m.style.backgroundColor="red":m.style.backgroundColor=""}b.setAttribute("type","number"),b.setAttribute("value",ExportDialog.lastBorderValue),b.style.width="180px",(t=document.createElement("td")).appendChild(b),e.appendChild(t),i.appendChild(e),l.appendChild(i),mxEvent.addListener(s,"change",y),y(),mxEvent.addListener(u,"change",function(){x=!0;var e=Math.max(0,parseFloat(u.value)||100)/100;u.value=parseFloat((100*e).toFixed(2)),0<n?(p.value=Math.floor(n*e),m.value=Math.floor(o*e)):(u.value="100",p.value=n,m.value=o),v()}),mxEvent.addListener(p,"change",function(){var e=parseInt(p.value)/n;0<e?(u.value=parseFloat((100*e).toFixed(2)),m.value=Math.floor(o*e)):(u.value="100",p.value=n,m.value=o),v()}),mxEvent.addListener(m,"change",function(){var e=parseInt(m.value)/o;0<e?(u.value=parseFloat((100*e).toFixed(2)),p.value=Math.floor(n*e)):(u.value="100",p.value=n,m.value=o),v()}),e=document.createElement("tr"),(t=document.createElement("td")).setAttribute("align","right"),t.style.paddingTop="22px",t.colSpan=2;var c=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){var e,t,l,i,n,o;parseInt(u.value)<=0?mxUtils.alert(mxResources.get("drawingEmpty")):(e=d.value,t=s.value,l=Math.max(0,parseFloat(u.value)||100)/100,i=Math.max(0,parseInt(b.value)),n=r.background,o=Math.max(1,parseInt(h.value)),"svg"!=t&&"png"!=t&&"pdf"!=t||!C.checked?null!=n&&n!=mxConstants.NONE||(n="#ffffff"):n=null,ExportDialog.lastBorderValue=i,ExportDialog.exportFile(a,e,t,n,l,i,o))})),f=(c.className="geBtn gePrimaryBtn",mxUtils.button(mxResources.get("cancel"),function(){a.hideDialog()}));f.className="geBtn",a.editor.cancelFirst?(t.appendChild(f),t.appendChild(c)):(t.appendChild(c),t.appendChild(f)),e.appendChild(t),i.appendChild(e),l.appendChild(i),this.container=l}),EditDataDialog=(ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,i,n,o,a){var r,d,s,c=e.editor.graph;"xml"==l?ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l):"svg"==l?ExportDialog.saveLocalFile(e,mxUtils.getXml(c.getSvg(i,n,o)),t,l):(s=c.getGraphBounds(),d=(r=mxUtils.createXmlDocument()).createElement("output"),r.appendChild(d),(r=new mxXmlCanvas2D(d)).translate(Math.floor((o/n-s.x)/c.view.scale),Math.floor((o/n-s.y)/c.view.scale)),r.scale(n/c.view.scale),(new mxImageExport).drawState(c.getView().getState(c.model.root),r),r="xml="+encodeURIComponent(mxUtils.getXml(d)),d=Math.ceil(s.width*n/c.view.scale+2*o),s=Math.ceil(s.height*n/c.view.scale+2*o),r.length<=MAX_REQUEST_SIZE&&d*s<MAX_AREA?(e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=i?i:"none")+"&w="+d+"&h="+s+"&"+r+"&dpi="+a).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge")))},ExportDialog.saveLocalFile=function(e,t,l,i){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))},function(l,i){var e=document.createElement("div"),n=l.editor.graph,o=n.getModel().getValue(i),t=(mxUtils.isNode(o)||((y=mxUtils.createXmlDocument().createElement("object")).setAttribute("label",o||""),o=y),{});try{null!=(m=mxUtils.getValue(l.editor.graph.getCurrentCellStyle(i),"metaData",null))&&(t=JSON.parse(m))}catch(e){}for(var r=new mxForm("properties"),a=(r.table.style.width="100%",o.attributes),d=[],s=[],c=0,u=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(l,i):null,p=function(e,t){function l(){for(var e=0,t=0;t<d.length;t++){if(d[t]==i){s[t]=null,r.table.deleteRow(e+(null!=u?1:0));break}null!=s[t]&&e++}}var i,n=document.createElement("div"),o=(n.style.position="relative",n.style.paddingRight="20px",n.style.boxSizing="border-box",n.style.width="100%",document.createElement("a")),a=mxUtils.createImage(Dialog.prototype.closeImage),a=(a.style.height="9px",a.style.fontSize="9px",a.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",o.className="geButton",o.setAttribute("title",mxResources.get("delete")),o.style.position="absolute",o.style.top="4px",o.style.right="0px",o.style.margin="0px",o.style.width="9px",o.style.height="9px",o.style.cursor="pointer",o.appendChild(a),i=t,mxEvent.addListener(o,"click",l),e.parentNode);n.appendChild(e),n.appendChild(o),a.appendChild(n)},m=[],g=n.getModel().getParent(i)==n.getModel().getRoot(),h=0;h<a.length;h++)!g&&"label"==a[h].nodeName||"placeholders"==a[h].nodeName||m.push({name:a[h].nodeName,value:a[h].nodeValue});m.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),null!=u&&((y=document.createElement("div")).style.width="100%",y.style.fontSize="11px",y.style.textAlign="center",mxUtils.write(y,u),r.addField(mxResources.get("id")+":",y));for(var x,C,b,h=0;h<m.length;h++)x=c,C=m[h].name,b=m[h].value,d[x]=C,s[x]=r.addTextarea(d[c]+":",b,2),s[x].style.width="100%",0<b.indexOf("\n")&&s[x].setAttribute("rows","2"),p(s[x],C),null!=t[C]&&0==t[C].editable&&s[x].setAttribute("disabled","disabled"),c++;var y=document.createElement("div"),v=(y.style.cssText="position:absolute;left:30px;right:30px;overflow-y:auto;top:30px;bottom:80px;",y.appendChild(r.table),document.createElement("div")),f=(v.style.boxSizing="border-box",v.style.paddingRight="160px",v.style.whiteSpace="nowrap",v.style.marginTop="6px",v.style.width="100%",document.createElement("input")),E=(f.setAttribute("placeholder",mxResources.get("enterPropertyName")),f.setAttribute("type","text"),f.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),f.style.boxSizing="border-box",f.style.marginLeft="2px",f.style.width="100%",v.appendChild(f),y.appendChild(v),e.appendChild(y),mxUtils.button(mxResources.get("addProperty"),function(){var e=f.value;if(0<e.length&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t,l=mxUtils.indexOf(d,e);0<=l&&null!=s[l]?s[l].focus():(o.cloneNode(!1).setAttribute(e,""),0<=l&&(d.splice(l,1),s.splice(l,1)),d.push(e),(t=r.addTextarea(e+":","",2)).style.width="100%",s.push(t),p(t,e),t.focus()),E.setAttribute("disabled","disabled"),f.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))})),y=(this.init=function(){(0<s.length?s[0]:f).focus()},E.setAttribute("title",mxResources.get("addProperty")),E.setAttribute("disabled","disabled"),E.style.textOverflow="ellipsis",E.style.position="absolute",E.style.overflow="hidden",E.style.width="144px",E.style.right="0px",E.className="geBtn",v.appendChild(E),mxUtils.button(mxResources.get("cancel"),function(){l.hideDialog.apply(l,arguments)})),v=(y.className="geBtn",mxUtils.button(mxResources.get("apply"),function(){try{l.hideDialog.apply(l,arguments),o=o.cloneNode(!0);for(var e=!1,t=0;t<d.length;t++)null==s[t]?o.removeAttribute(d[t]):(o.setAttribute(d[t],s[t].value),e=e||"placeholder"==d[t]&&"1"==o.getAttribute("placeholders"));e&&o.removeAttribute("label"),n.getModel().setValue(i,o)}catch(e){mxUtils.alert(e)}}));function w(){0<f.value.length?E.removeAttribute("disabled"):E.setAttribute("disabled","disabled")}v.className="geBtn gePrimaryBtn",mxEvent.addListener(f,"keyup",w),mxEvent.addListener(f,"change",w);var F,A,k,D=document.createElement("div");D.style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",(l.editor.graph.getModel().isVertex(i)||l.editor.graph.getModel().isEdge(i))&&((F=document.createElement("span")).style.marginRight="10px",(A=document.createElement("input")).setAttribute("type","checkbox"),A.style.marginRight="6px","1"==o.getAttribute("placeholders")&&(A.setAttribute("checked","checked"),A.defaultChecked=!0),mxEvent.addListener(A,"click",function(){"1"==o.getAttribute("placeholders")?o.removeAttribute("placeholders"):o.setAttribute("placeholders","1")}),F.appendChild(A),mxUtils.write(F,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink&&((A=document.createElement("a")).setAttribute("href",EditDataDialog.placeholderHelpLink),A.setAttribute("title",mxResources.get("help")),A.setAttribute("target","_blank"),A.style.marginLeft="8px",A.style.cursor="help",k=document.createElement("img"),mxUtils.setOpacity(k,50),k.style.height="16px",k.style.width="16px",k.setAttribute("border","0"),k.setAttribute("valign","middle"),k.style.marginTop=mxClient.IS_IE11?"0px":"-4px",k.setAttribute("src",Editor.helpImage),A.appendChild(k),F.appendChild(A)),D.appendChild(F)),l.editor.cancelFirst?(D.appendChild(y),D.appendChild(v)):(D.appendChild(v),D.appendChild(y)),e.appendChild(D),this.container=e}),LinkDialog=(EditDataDialog.getDisplayIdForCell=function(e,t){var l=null;return l=null!=e.editor.graph.getModel().getParent(t)?t.getId():l},EditDataDialog.placeholderHelpLink=null,function(t,e,l,i){var n=document.createElement("div"),o=(mxUtils.write(n,mxResources.get("editLink")+":"),document.createElement("div")),a=(o.className="geTitle",o.style.backgroundColor="transparent",o.style.borderColor="transparent",o.style.whiteSpace="nowrap",o.style.textOverflow="clip",o.style.cursor="default",mxClient.IS_VML||(o.style.paddingRight="20px"),document.createElement("input")),e=(a.setAttribute("value",e),a.setAttribute("placeholder","http://www.example.com/"),a.setAttribute("type","text"),a.style.marginTop="6px",a.style.width="400px",a.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",a.style.backgroundRepeat="no-repeat",a.style.backgroundPosition="100% 50%",a.style.paddingRight="14px",document.createElement("div")),e=(e.setAttribute("title",mxResources.get("reset")),e.style.position="relative",e.style.left="-16px",e.style.width="12px",e.style.height="14px",e.style.cursor="pointer",e.style.display=mxClient.IS_VML?"inline":"inline-block",e.style.top=(mxClient.IS_VML?0:3)+"px",e.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(e,"click",function(){a.value="",a.focus()}),o.appendChild(a),o.appendChild(e),n.appendChild(o),this.init=function(){a.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?a.select():document.execCommand("selectAll",!1,null)},document.createElement("div")),o=(e.style.marginTop="18px",e.style.textAlign="right",mxEvent.addListener(a,"keypress",function(e){13==e.keyCode&&(t.hideDialog(),i(a.value))}),mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()})),l=(o.className="geBtn",t.editor.cancelFirst&&e.appendChild(o),mxUtils.button(l,function(){t.hideDialog(),i(a.value)}));l.className="geBtn gePrimaryBtn",e.appendChild(l),t.editor.cancelFirst||e.appendChild(o),n.appendChild(e),this.container=n}),OutlineWindow=function(e,t,l,i,n){var o,a,r=e.editor.graph,d=document.createElement("div"),s=(d.style.position="absolute",d.style.width="100%",d.style.height="100%",d.style.border="1px solid whiteSmoke",d.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),d,t,l,i,n,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)},mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)})),c=(mxEvent.addListener(window,"resize",s),e.createOutline(this.window)),u=(this.destroy=function(){mxEvent.removeListener(window,"resize",s),this.window.destroy(),c.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){c.update(!1),c.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),c.suspended=!1,c.outline.refresh(),c.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){c.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){c.suspended=!1,c.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){c.suspended=!0})),c.createGraph);function p(){c.outline.pageScale=r.pageScale,c.outline.pageFormat=r.pageFormat,c.outline.pageVisible=r.pageVisible,c.outline.background=null==r.background||r.background==mxConstants.NONE?r.defaultPageBackgroundColor:r.background;var e=mxUtils.getCurrentStyle(r.container);d.style.backgroundColor=e.backgroundColor,null!=r.view.backgroundPageShape&&null!=c.outline.view.backgroundPageShape&&(c.outline.view.backgroundPageShape.fill=r.view.backgroundPageShape.fill),c.outline.refresh()}c.createGraph=function(e){var t=u.apply(this,arguments),l=(t.gridEnabled=!1,t.pageScale=r.pageScale,t.pageFormat=r.pageFormat,t.background=null==r.background||r.background==mxConstants.NONE?r.defaultPageBackgroundColor:r.background,t.pageVisible=r.pageVisible,mxUtils.getCurrentStyle(r.container));return d.style.backgroundColor=l.backgroundColor,t},c.init(d),e.editor.addListener("resetGraphView",p),e.addListener("pageFormatChanged",p),e.addListener("backgroundColorChanged",p),e.addListener("backgroundImageChanged",p),e.addListener("pageViewChanged",function(){p(),c.update(!0)}),c.outline.dialect==mxConstants.DIALECT_SVG&&(o=e.actions.get("zoomIn"),a=e.actions.get("zoomOut"),mxEvent.addMouseWheelListener(function(e,t){for(var l=!1,i=mxEvent.getSource(e);null!=i;){if(i==c.outline.view.canvas.ownerSVGElement){l=!0;break}i=i.parentNode}l&&(t?o:a).funct()}))},LayersWindow=function(d,e,t,l,i){var s=d.editor.graph,n=document.createElement("div"),o=(n.style.userSelect="none",n.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,n.style.border="1px solid whiteSmoke",n.style.height="100%",n.style.marginBottom="10px",n.style.overflow="auto",EditorUi.compactUi?"26px":"30px"),c=document.createElement("div"),u=(c.style.backgroundColor="white"==Dialog.backdropColor?"#dcdcdc":Dialog.backdropColor,c.style.position="absolute",c.style.overflow="auto",c.style.left="0px",c.style.right="0px",c.style.top="0px",c.style.bottom=parseInt(o)+7+"px",n.appendChild(c),null),p=null,m=(mxEvent.addListener(n,"dragover",function(e){e.dataTransfer.dropEffect="move",p=0,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(n,"drop",function(e){e.stopPropagation(),e.preventDefault()}),null),g=null,a=document.createElement("div"),o=(a.className="geToolbarContainer",a.style.position="absolute",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.style.height=o,a.style.overflow="hidden",a.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",a.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,a.style.borderWidth="1px 0px 0px 0px",a.style.borderColor="#c3c3c3",a.style.borderStyle="solid",a.style.display="block",a.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(a.style.filter="none"),document.createElement("a")),r=(o.className="geButton",mxClient.IS_QUIRKS&&(o.style.filter="none"),o.cloneNode()),h=(r.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(r,"click",function(e){if(s.isEnabled()){s.model.beginUpdate();try{var t=s.model.root.getIndex(g);s.removeCells([g],!1),0==s.model.getChildCount(s.model.root)?(s.model.add(s.model.root,new mxCell),s.setDefaultParent(null)):0<t&&t<=s.model.getChildCount(s.model.root)?s.setDefaultParent(s.model.getChildAt(s.model.root,t-1)):s.setDefaultParent(null)}finally{s.model.endUpdate()}}mxEvent.consume(e)}),s.isEnabled()||(r.className="geButton mxDisabled"),a.appendChild(r),o.cloneNode()),x=(h.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),h.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(h,"click",function(e){var t;s.isEnabled()&&!s.isSelectionEmpty()&&(t=mxUtils.getOffset(h),d.showPopupMenu(mxUtils.bind(this,function(l,i){for(var e=m-1;0<=e;e--)mxUtils.bind(this,function(e){var t=l.addItem(s.convertValueToString(e)||mxResources.get("background"),null,mxUtils.bind(this,function(){s.moveCells(s.getSelectionCells(),0,0,!1,e)}),i);1==s.getSelectionCount()&&s.model.isAncestor(e,s.getSelectionCell())&&l.addCheckmark(t,Editor.checkmarkImage)})(s.model.getChildAt(s.model.root,e))}),t.x,t.y+h.offsetHeight,e))}),a.appendChild(h),o.cloneNode());x.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',x.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(x,"click",function(e){s.isEnabled()&&d.showDataDialog(g),mxEvent.consume(e)}),s.isEnabled()||(x.className="geButton mxDisabled"),a.appendChild(x);var C=o.cloneNode(),o=(C.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(C,"click",function(e){if(s.isEnabled()){var t=null;s.model.beginUpdate();try{t=s.cloneCell(g),s.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=s.addCell(t,s.model.root),s.setDefaultParent(t)}finally{s.model.endUpdate()}null==t||s.isCellLocked(t)||s.selectAll(t)}}),s.isEnabled()||(C.className="geButton mxDisabled"),a.appendChild(C),o.cloneNode());function b(){function t(t,e,l,i){var n=document.createElement("div"),o=(n.className="geToolbarContainer",n.style.overflow="hidden",n.style.position="relative",n.style.padding="4px",n.style.height="22px",n.style.display="block",n.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,n.style.borderWidth="0px 0px 1px 0px",n.style.borderColor="#c3c3c3",n.style.borderStyle="solid",n.style.whiteSpace="nowrap",n.setAttribute("title",e),document.createElement("div")),a=(o.style.display="inline-block",o.style.width="100%",o.style.textOverflow="ellipsis",o.style.overflow="hidden",mxEvent.addListener(n,"dragover",function(e){e.dataTransfer.dropEffect="move",p=t,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(n,"dragstart",function(e){u=n,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(n,"dragend",function(e){null!=u&&null!=p&&s.addCell(l,s.model.root,p),p=u=null,e.stopPropagation(),e.preventDefault()}),document.createElement("img")),r=(a.setAttribute("draggable","false"),a.setAttribute("align","top"),a.setAttribute("border","0"),a.style.padding="4px",a.setAttribute("title",mxResources.get("lockUnlock")),s.getCurrentCellStyle(l)),a=("1"==mxUtils.getValue(r,"locked","0")?a.setAttribute("src",Dialog.prototype.lockedImage):a.setAttribute("src",Dialog.prototype.unlockedImage),s.isEnabled()&&(a.style.cursor="pointer"),mxEvent.addListener(a,"click",function(e){if(s.isEnabled()){var t=null;s.getModel().beginUpdate();try{t="1"==mxUtils.getValue(r,"locked","0")?null:"1",s.setCellStyles("locked",t,[l])}finally{s.getModel().endUpdate()}"1"==t&&s.removeSelectionCells(s.getModel().getDescendants(l)),mxEvent.consume(e)}}),o.appendChild(a),document.createElement("input"));a.setAttribute("type","checkbox"),a.setAttribute("title",mxResources.get("hideIt",[l.value||mxResources.get("background")])),a.style.marginLeft="4px",a.style.marginRight="6px",a.style.marginTop="4px",o.appendChild(a),s.model.isVisible(l)&&(a.setAttribute("checked","checked"),a.defaultChecked=!0),mxEvent.addListener(a,"click",function(e){s.model.setVisible(l,!s.model.isVisible(l)),mxEvent.consume(e)}),mxUtils.write(o,e),n.appendChild(o),s.isEnabled()&&((mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10)&&((a=document.createElement("div")).style.display="block",a.style.textAlign="right",a.style.whiteSpace="nowrap",a.style.position="absolute",a.style.right="6px",a.style.top="6px",0<t&&((e=document.createElement("a")).setAttribute("title",mxResources.get("toBack")),e.className="geButton",e.style.cssFloat="none",e.innerHTML="&#9660;",e.style.width="14px",e.style.height="14px",e.style.fontSize="14px",e.style.margin="0px",e.style.marginTop="-1px",a.appendChild(e),mxEvent.addListener(e,"click",function(e){s.isEnabled()&&s.addCell(l,s.model.root,t-1),mxEvent.consume(e)})),0<=t&&t<m-1&&((o=document.createElement("a")).setAttribute("title",mxResources.get("toFront")),o.className="geButton",o.style.cssFloat="none",o.innerHTML="&#9650;",o.style.width="14px",o.style.height="14px",o.style.fontSize="14px",o.style.margin="0px",o.style.marginTop="-1px",a.appendChild(o),mxEvent.addListener(o,"click",function(e){s.isEnabled()&&s.addCell(l,s.model.root,t+1),mxEvent.consume(e)})),n.appendChild(a)),mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&(n.setAttribute("draggable","true"),n.style.cursor="move")),mxEvent.addListener(n,"dblclick",function(e){var t=mxEvent.getSource(e).nodeName;"INPUT"!=t&&"IMG"!=t&&(!function(t){var e;s.isEnabled()&&null!=t&&(e=s.convertValueToString(t),e=new FilenameDialog(d,e||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(e){null!=e&&s.cellLabelChanged(t,e)}),mxResources.get("enterName")),d.showDialog(e.container,300,100,!0,!0),e.init())}(l),mxEvent.consume(e))}),s.getDefaultParent()==l?(n.style.background="white"==Dialog.backdropColor?"#e6eff8":"#505759",n.style.fontWeight=s.isEnabled()?"bold":"",g=l):mxEvent.addListener(n,"click",function(e){s.isEnabled()&&(s.setDefaultParent(i),s.view.setCurrentRoot(null))}),c.appendChild(n)}m=s.model.getChildCount(s.model.root),c.innerHTML="";for(var l=m-1;0<=l;l--)mxUtils.bind(this,function(e){t(l,s.convertValueToString(e)||mxResources.get("background"),e,e)})(s.model.getChildAt(s.model.root,l));var e=s.convertValueToString(g)||mxResources.get("background");r.setAttribute("title",mxResources.get("removeIt",[e])),C.setAttribute("title",mxResources.get("duplicateIt",[e])),x.setAttribute("title",mxResources.get("editData")),s.isSelectionEmpty()&&(h.className="geButton mxDisabled")}o.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',o.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(o,"click",function(e){if(s.isEnabled()){s.model.beginUpdate();try{var t=s.addCell(new mxCell(mxResources.get("untitledLayer")),s.model.root);s.setDefaultParent(t)}finally{s.model.endUpdate()}}mxEvent.consume(e)}),s.isEnabled()||(o.className="geButton mxDisabled"),a.appendChild(o),n.appendChild(a),b(),s.model.addListener(mxEvent.CHANGE,b),s.addListener("defaultParentChanged",b),s.selectionModel.addListener(mxEvent.CHANGE,function(){s.isSelectionEmpty()?h.className="geButton mxDisabled":h.className="geButton"}),this.window=new mxWindow(mxResources.get("layers"),n,e,t,l,i,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){c.scrollTop=c.scrollHeight-c.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=b,this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var y=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",y),this.destroy=function(){mxEvent.removeListener(window,"resize",y),this.window.destroy()}};